<div class="authoring-page">
  <h2>Create New Chapter</h2>

  <form>
    <div class="form-group">
      <label for="title">Chapter Title</label>
      <input
        type="text"
        id="title"
        [(ngModel)]="chapter.title"
        name="title"
        placeholder="Enter the chapter title"
        required
      />
    </div>

    <div class="form-group">
      <label for="content">Chapter Content</label>
      <textarea
        id="content"
        [(ngModel)]="chapter.content"
        name="content"
        rows="10"
        placeholder="Write your chapter content here..."
        required
      ></textarea>
    </div>

    <!-- New Prompt Field -->
    <div class="form-group">
      <label for="prompt">Image Prompt</label>
      <input
        type="text"
        id="prompt"
        [(ngModel)]="chapter.prompt"
        name="prompt"
        placeholder="Enter an image prompt (e.g. 'A calm forest at dawn')"
      />
    </div>

    <div class="form-group">
      <label for="images">Upload Images</label>
      <input
        type="file"
        id="images"
        (change)="onFileSelected($event, 'image')"
        multiple
        accept="image/*"
      />
      <div class="preview">
        <h4>Uploaded Images:</h4>
        <img
          *ngFor="let image of chapter.images"
          [src]="image | safeUrl"
          alt="Uploaded Image"
          class="uploaded-image"
        />
      </div>
    </div>

    <div class="form-group">
      <label for="sounds">Upload Sounds</label>
      <input
        type="file"
        id="sounds"
        (change)="onFileSelected($event, 'sound')"
        multiple
        accept="audio/*"
      />
      <div class="preview">
        <h4>Uploaded Sounds:</h4>
        <audio
          *ngFor="let sound of chapter.sounds"
          [src]="sound | safeUrl"
          controls
        ></audio>
      </div>
    </div>

    <!-- Save Chapter Button -->
    <button mat-raised-button color="primary" (click)="saveChapter()">
      Save Chapter
    </button>
  </form>
</div>
